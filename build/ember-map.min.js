/*! ember-map 2014-06-11 1:14:32 */
(function(){window.DreamcodeComponents=Ember.Namespace.create()}).call(this),function(){DreamcodeComponents.EmberMapComponent=Ember.Component.extend({classNames:["ember-map"],attributeBindings:["lat","lng","zoom","currentLocation","swlat","swlng","nelat","nelng"],didInsertElement:function(){return this.attachCanvas()},willDestroyElement:function(){return this.detachCanvas()},attachCanvas:function(){return this.canvas=$("#google-map-canvas"),0===this.canvas.length&&this.buildMap(),this.map=DreamcodeComponents.EmberMapComponent.map,this.currentLocationMarker=DreamcodeComponents.EmberMapComponent.currentLocationMarker,this.addEventListeners(),this.centerMap(),this.map.getBounds()&&this.updateBounds(),this.$().append(this.canvas)},detachCanvas:function(){return this.canvas.appendTo("body"),this.clearEventListeners()},buildMap:function(){var a;return this.canvas=$("<div>").attr("id","google-map-canvas").attr("style","position: absolute; width: 100%; height: 100%"),a={zoom:this.get("zoom"),center:new google.maps.LatLng(this.get("lat"),this.get("lng")),mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_TOP}},this.map=new google.maps.Map(this.canvas[0],a),this.currentLocationMarker=this.buildCurrentLocationMarker(),DreamcodeComponents.EmberMapComponent.map=this.map,DreamcodeComponents.EmberMapComponent.currentLocationMarker=this.currentLocationMarker},buildCurrentLocationMarker:function(){var a;return a={url:this.currentLocationMarkerImageUrl,size:null,origin:null,anchor:new google.maps.Point(32,32),scaledSize:new google.maps.Size(64,64)},new google.maps.Marker({map:this.map,icon:a})},updateCurrentLocationMarker:function(){var a,b;return b=this.get("currentLocation"),a=new google.maps.LatLng(b[0],b[1]),this.currentLocationMarker.setPosition(a)}.observes("currentLocation"),centerMap:function(){return this.map.setCenter(new google.maps.LatLng(this.get("lat"),this.get("lng")))}.observes("lat","lng"),updateBounds:function(){var a,b;return b=this.map.getBounds().getSouthWest(),a=this.map.getBounds().getNorthEast(),this.set("swlat",b.lat()),this.set("swlng",b.lng()),this.set("nelat",a.lat()),this.set("nelng",a.lng())}.observes("lat","lng","zoom"),addEventListeners:function(){return google.maps.event.addListener(this.map,"dragend",function(a){return function(){return Ember.run(function(){var b;return b=a.map.getCenter(),a.set("lat",b.lat()),a.set("lng",b.lng())})}}(this)),google.maps.event.addListener(this.map,"zoom_changed",function(a){return function(){return Ember.run(function(){return a.set("zoom",a.map.getZoom())})}}(this))},clearEventListeners:function(){return google.maps.event.clearListeners(this.map)}})}.call(this),function(){DreamcodeComponents.Register=Ember.Mixin.create({EmberMapComponent:DreamcodeComponents.EmberMapComponent})}.call(this);